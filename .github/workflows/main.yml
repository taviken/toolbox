stages:
  - test

run_tests:
  stage: test
  before_script:
    # Install dependencies
    - pip install --upgrade pip
    - pip install -r requirements.txt
    # # Install pytest and coverage plugins if not in requirements.txt
    # - pip install pytest pytest-cov
  script:
    # Run pytest and generate a JUnit XML report and coverage report
    - pytest --junitxml=report.xml --cov=. --cov-fail-under=80
  artifacts:
    when: always
    paths:
      - report.xml
    reports:
      junit: report.xml
